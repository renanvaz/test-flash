package {	import flash.display.MovieClip;	import flash.media.Microphone;	import flash.system.Security;	import flash.events.ActivityEvent;    import flash.events.SampleDataEvent;    import flash.utils.ByteArray;    import flash.media.SoundMixer;	public class Test extends MovieClip {        public const SAMPLING_RATE:int  = 44100;        public const SAMPLES:int        = 512;        public const REPEAT:int         = 3;        public const OFFSET:int         = 60;        private var mic: Microphone;		public function Test(): void {			var bytes:ByteArray = new ByteArray;			bytes.writeUTFBytes("A");            trace(bytes.length);            bytes.position = 0;            trace(String.fromCharCode(bytes.readByte()));            mic = Microphone.getMicrophone();            mic.framesPerPacket = 2; // Default 2            mic.rate = 44; // 44100Hz, Default 8            mic.setLoopBack(true);            mic.setSilenceLevel(1, 0);            mic.setUseEchoSuppression(false);            mic.addEventListener(ActivityEvent.ACTIVITY, onMicActivity);            //mic.addEventListener(SampleDataEvent.SAMPLE_DATA, onSampleData);		}        private function onMicActivity (e:ActivityEvent):void {            if (mic.activityLevel  > 0) {                trace('s');            }        }        private function onSampleData (event:SampleDataEvent):void {            trace(event.data.length);            trace(event.data.bytesAvailable);            var i = 0;            var d = event.data;            while (d.bytesAvailable) {                trace(d.readByte());            }            //mic.removeEventListener(SampleDataEvent.SAMPLE_DATA, onSampleData);        }	}}